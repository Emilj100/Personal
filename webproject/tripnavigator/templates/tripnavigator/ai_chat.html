{% extends "tripnavigator/layout.html" %}
{% load static %}

{% block title %}Ask AI - Chat{% endblock %}

{% block css %}
  <!-- Include custom CSS for the AI Chat page -->
  <link rel="stylesheet" href="{% static 'tripnavigator/css/ai_chat.css' %}">
{% endblock %}

{% block content %}
<div class="container my-4">
  <!-- Page title -->
  <h2 class="mb-4 text-center">Ask AI</h2>
  
  <!-- Chat wrapper -->
  <div id="chatWrapper" class="mx-auto">
    <!-- Chat header -->
    <div id="chatHeader" class="d-flex align-items-center justify-content-between flex-wrap">
      <h5 class="mb-0">Chat with TripNavigator AI</h5>
      <small>Powered by OpenAI</small>
    </div>
    
    <!-- Chat container where messages are dynamically inserted -->
    <div id="chatContainer">
      <!-- Dynamic messages will be inserted here -->
    </div>
  </div>
  
  <!-- Form for user input -->
  <form id="chatForm" class="mt-3">
    <div class="input-group">
      <input type="text" id="userMessage" class="form-control" placeholder="Type your question here..." autocomplete="off" required>
      <button class="btn btn-primary" type="submit">
        <i class="bi bi-send-fill"></i>
      </button>
    </div>
  </form>
  
  <!-- Predefined questions buttons -->
  <div class="predefined-buttons d-flex flex-wrap justify-content-center gap-2 mt-3">
    <button class="btn btn-outline-secondary" type="button" onclick="setPredefined('How can I save money on my travel?')">
      How can I save money on my travel?
    </button>
    <button class="btn btn-outline-secondary" type="button" onclick="setPredefined('What should I pack for a tropical vacation?')">
      What should I pack for a tropical vacation?
    </button>
    <button class="btn btn-outline-secondary" type="button" onclick="setPredefined('What are the best attractions in Tokyo?')">
      What are the best attractions in Tokyo?
    </button>
  </div>
</div>
{% endblock %}

{% block script %}
  <!-- Include jQuery for AJAX functionality -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Include Bootstrap Icons if not already in layout -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  
  <!-- Include external JavaScript for the AI Chat functionality -->
  <script src="{% static 'tripnavigator/js/ai_chat.js' %}"></script>
{% endblock %}
